<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>
 — recombineCVSL • SuperLearner</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">SuperLearner</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ecpolley/SuperLearner">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>
</h1>
    </div>

    
    <p>Function to re-compute the V-fold cross-validated risk estimate for super learner using a new metalearning method.  This function takes as input an existing CV.SuperLearner fit and applies the <code>recombineSL</code> fit to each of the V Super Learner fits.</p>
    

    <pre><span class='fu'>recombineCVSL</span>(<span class='no'>object</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"method.NNloglik"</span>, <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>saveAll</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>parallel</span> <span class='kw'>=</span> <span class='st'>"seq"</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <dl class="dl-horizontal">
      <dt>object</dt>
      <dd>
Fitted object from <code>CV.SuperLearner</code>. 
</dd>
      <dt>method</dt>
      <dd>
A list (or a function to create a list) containing details on estimating the coefficients for the super learner and the model to combine the individual algorithms in the library. See <code>?method.template</code> for details.  Currently, the built in options are either &quot;method.NNLS&quot; (the default), &quot;method.NNLS2&quot;, &quot;method.NNloglik&quot;, &quot;method.CC_LS&quot;, &quot;method.CC_nloglik&quot;, or &quot;method.AUC&quot;.  NNLS and NNLS2 are non-negative least squares based on the Lawson-Hanson algorithm and the dual method of Goldfarb and Idnani, respectively.  NNLS and NNLS2 will work for both gaussian and binomial outcomes.  NNloglik is a non-negative binomial likelihood maximization using the BFGS quasi-Newton optimization method. NN* methods are normalized so weights sum to one. CC_LS uses Goldfarb and Idnani&#39;s quadratic programming algorithm to calculate the best convex combination of weights to minimize the squared error loss. CC_nloglik calculates the convex combination of weights that minimize the negative binomial log likelihood on the logistic scale using the sequential quadratic programming algorithm.  AUC, which only works for binary outcomes, uses the Nelder-Mead method via the optim function to minimize rank loss (equivalent to maximizing AUC).
</dd>
      <dt>verbose</dt>
      <dd>
logical; TRUE for printing progress during the computation (helpful for debugging).
</dd>
      <dt>saveAll</dt>
      <dd>
Logical; Should the entire <code>SuperLearner</code> object be saved for each fold?
</dd>
      <dt>parallel</dt>
      <dd>
Options for parallel computation of the V-fold step. Use &quot;seq&quot; (the default) for sequential computation. <code>parallel = &#39;multicore&#39;</code> to use <code>mclapply</code> for the V-fold step (but note that <code>SuperLearner()</code> will still be sequential). Or <code>parallel</code> can be the name of a snow cluster and will use <code>parLapply</code> for the V-fold step. For both multicore and snow, the inner <code>SuperLearner</code> calls will be sequential.
  </dd>
    </dl>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The function <code>recombineCVSL</code> computes the usual V-fold cross-validated risk estimate for the super learner (and all algorithms in <code>SL.library</code> for comparison), using a newly specified metalearning method. The weights for each algorithm in <code>SL.library</code> are re-estimated using the new metalearner, however the base learner fits are not regenerated, so this function saves a lot of computation time as opposed to using the <code>CV.SuperLearner</code> function with a new <code>method</code> argument.  The output is identical to the output from the <code>CV.SuperLearner</code> function.</p>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of class <code>CV.SuperLearner</code> (a list) with components:</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='recombineSL.html'>recombineSL</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>## Not run: ------------------------------------</span>
<span class='co'># </span>
<span class='co'># # Binary outcome example adapted from SuperLearner examples</span>
<span class='co'># </span>
<span class='co'># set.seed(1)</span>
<span class='co'># N &lt;- 200</span>
<span class='co'># X &lt;- matrix(rnorm(N*10), N, 10)</span>
<span class='co'># X &lt;- as.data.frame(X)</span>
<span class='co'># Y &lt;- rbinom(N, 1, plogis(.2*X[, 1] + .1*X[, 2] - .2*X[, 3] + </span>
<span class='co'>#   .1*X[, 3]*X[, 4] - .2*abs(X[, 4])))</span>
<span class='co'># </span>
<span class='co'># SL.library &lt;- c("SL.glmnet", "SL.glm", "SL.knn", "SL.gam", "SL.mean")</span>
<span class='co'># </span>
<span class='co'># # least squares loss function</span>
<span class='co'># set.seed(1) # for reproducibility</span>
<span class='co'># cvfit_nnls &lt;- CV.SuperLearner(Y = Y, X = X, V = 10, SL.library = SL.library, </span>
<span class='co'>#   verbose = TRUE, method = "method.NNLS", family = binomial())</span>
<span class='co'># cvfit_nnls$coef</span>
<span class='co'># #    SL.glmnet_All SL.glm_All  SL.knn_All SL.gam_All SL.mean_All</span>
<span class='co'># # 1      0.0000000 0.00000000 0.000000000  0.4143862   0.5856138</span>
<span class='co'># # 2      0.0000000 0.00000000 0.304802397  0.3047478   0.3904498</span>
<span class='co'># # 3      0.0000000 0.00000000 0.002897533  0.5544075   0.4426950</span>
<span class='co'># # 4      0.0000000 0.20322642 0.000000000  0.1121891   0.6845845</span>
<span class='co'># # 5      0.1743973 0.00000000 0.032471026  0.3580624   0.4350693</span>
<span class='co'># # 6      0.0000000 0.00000000 0.099881535  0.3662309   0.5338876</span>
<span class='co'># # 7      0.0000000 0.00000000 0.234876082  0.2942472   0.4708767</span>
<span class='co'># # 8      0.0000000 0.06424676 0.113988158  0.5600208   0.2617443</span>
<span class='co'># # 9      0.0000000 0.00000000 0.338030342  0.2762604   0.3857093</span>
<span class='co'># # 10     0.3022442 0.00000000 0.294226204  0.1394534   0.2640762</span>
<span class='co'># </span>
<span class='co'># </span>
<span class='co'># # negative log binomial likelihood loss function</span>
<span class='co'># cvfit_nnloglik &lt;- recombineCVSL(cvfit_nnls, method = "method.NNloglik")</span>
<span class='co'># cvfit_nnloglik$coef</span>
<span class='co'># #    SL.glmnet_All SL.glm_All SL.knn_All SL.gam_All SL.mean_All</span>
<span class='co'># # 1      0.0000000  0.0000000 0.00000000  0.5974799  0.40252010</span>
<span class='co'># # 2      0.0000000  0.0000000 0.31177345  0.6882266  0.00000000</span>
<span class='co'># # 3      0.0000000  0.0000000 0.01377469  0.8544238  0.13180152</span>
<span class='co'># # 4      0.0000000  0.1644188 0.00000000  0.2387919  0.59678930</span>
<span class='co'># # 5      0.2142254  0.0000000 0.00000000  0.3729426  0.41283197</span>
<span class='co'># # 6      0.0000000  0.0000000 0.00000000  0.5847150  0.41528502</span>
<span class='co'># # 7      0.0000000  0.0000000 0.47538172  0.5080311  0.01658722</span>
<span class='co'># # 8      0.0000000  0.0000000 0.00000000  1.0000000  0.00000000</span>
<span class='co'># # 9      0.0000000  0.0000000 0.45384961  0.2923480  0.25380243</span>
<span class='co'># # 10     0.3977816  0.0000000 0.27927906  0.1606384  0.16230097</span>
<span class='co'># </span>
<span class='co'># # If we use the same seed as the original `cvfit_nnls`, then</span>
<span class='co'># # the recombineCVSL and CV.SuperLearner results will be identical</span>
<span class='co'># # however, the recombineCVSL version will be much faster since</span>
<span class='co'># # it doesn't have to re-fit all the base learners, V times each.</span>
<span class='co'># set.seed(1)</span>
<span class='co'># cvfit_nnloglik2 &lt;- CV.SuperLearner(Y = Y, X = X, V = 10, SL.library = SL.library,</span>
<span class='co'>#   verbose = TRUE, method = "method.NNloglik", family = binomial())</span>
<span class='co'># cvfit_nnloglik2$coef</span>
<span class='co'># #    SL.glmnet_All SL.glm_All SL.knn_All SL.gam_All SL.mean_All</span>
<span class='co'># # 1      0.0000000  0.0000000 0.00000000  0.5974799  0.40252010</span>
<span class='co'># # 2      0.0000000  0.0000000 0.31177345  0.6882266  0.00000000</span>
<span class='co'># # 3      0.0000000  0.0000000 0.01377469  0.8544238  0.13180152</span>
<span class='co'># # 4      0.0000000  0.1644188 0.00000000  0.2387919  0.59678930</span>
<span class='co'># # 5      0.2142254  0.0000000 0.00000000  0.3729426  0.41283197</span>
<span class='co'># # 6      0.0000000  0.0000000 0.00000000  0.5847150  0.41528502</span>
<span class='co'># # 7      0.0000000  0.0000000 0.47538172  0.5080311  0.01658722</span>
<span class='co'># # 8      0.0000000  0.0000000 0.00000000  1.0000000  0.00000000</span>
<span class='co'># # 9      0.0000000  0.0000000 0.45384961  0.2923480  0.25380243</span>
<span class='co'># # 10     0.3977816  0.0000000 0.27927906  0.1606384  0.16230097</span>
<span class='co'># </span>
<span class='co'>## ---------------------------------------------</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>

      <li><a href="#value">Value</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
     Erin LeDell <a href='mailto:ledell@berkeley.edu'>ledell@berkeley.edu</a> 
  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Eric Polley, Erin LeDell, Chris Kennedy, Mark van der Laan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
